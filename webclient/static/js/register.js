// Generated by CoffeeScript 1.4.0
(function() {
  var register;

  $(document).ready(function() {
    return register.init();
  });

  register = {
    init: function() {
      return $("#registration-form").submit(function(e) {
        var email, error, first_name, last_name, password, termsaccepted, username;
        e.preventDefault();
        error = "<ul style='clear: both'>";
        first_name = $("#FirstName").val();
        last_name = $("#LastName").val();
        username = $("#Username").val();
        email = $("#Email").val();
        password = $("#Password").val();
        termsaccepted = $("#termsandconditions:checked").val();
        if (first_name.length === 0) {
          error += "<li>A First Name is required.<li/>";
        }
        if (last_name.length === 0) {
          error += "<li>A Last Name is required.<li/>";
        }
        if (username.length === 0) {
          error += "<li>A username is required.<li/>";
        }
        if (email.length === 0) {
          error += "<li>An email address is required.<li/>";
        }
        if (password.length === 0) {
          error += "<li>A password is required.<li/>";
        }
        if (!termsaccepted) {
          error += "<li>You must accept our terms and conditions to register an account.<li/>";
        }
        error += "</ul>";
        if (error !== "<ul style='clear: both'></ul>") {
          showDialog("error", "Registration Error", error);
          return false;
        }
        return jQuery.ajax({
          url: USER_REGISTER,
          data: {
            first_name: first_name,
            last_name: last_name,
            username: username,
            email: email,
            password: password
          },
          success: function(data) {
            if (data.exception) {
              showDialog("error", "Registration Error", data.exception);
              return;
            }
            if (data.result) {
              $("#register-or-login").slideUp('slow', function() {
                $("#registration-complete strong").text(email);
                return $("#registration-complete").fadeIn(1000);
              });
            }
          }
        }, false);
      });
    }
  };

}).call(this);
